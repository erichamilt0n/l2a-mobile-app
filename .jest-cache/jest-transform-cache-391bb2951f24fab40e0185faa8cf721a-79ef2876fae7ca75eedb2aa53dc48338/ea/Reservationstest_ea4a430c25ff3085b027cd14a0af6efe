8ed35f1efdb2d47e2becc4ac5d64152b
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
jest.mock('../components/icons', () => ({
    BayIcon: () => (0, jsx_runtime_1.jsx)("div", { "data-testid": "bay-icon", children: "Bay Icon" }),
    TableIcon: () => (0, jsx_runtime_1.jsx)("div", { "data-testid": "table-icon", children: "Table Icon" }),
}));
const react_1 = require("@testing-library/react");
const react_router_dom_1 = require("react-router-dom");
const Reservations_1 = __importDefault(require("./Reservations"));
describe('Reservations', () => {
    const renderReservations = () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(react_router_dom_1.BrowserRouter, { children: (0, jsx_runtime_1.jsx)(Reservations_1.default, {}) }));
    };
    it('renders reservation page header', () => {
        renderReservations();
        expect(react_1.screen.getByText('Make a Reservation')).toBeInTheDocument();
        expect(react_1.screen.getByText('Book your bay or table')).toBeInTheDocument();
    });
    describe('Reservation Type Selection', () => {
        it('renders reservation type buttons', () => {
            renderReservations();
            expect(react_1.screen.getByText('Bay Reservation')).toBeInTheDocument();
            expect(react_1.screen.getByText('Table Reservation')).toBeInTheDocument();
            expect(react_1.screen.getByTestId('bay-icon')).toBeInTheDocument();
            expect(react_1.screen.getByTestId('table-icon')).toBeInTheDocument();
        });
    });
    describe('Date Selection', () => {
        it('renders date selection section', () => {
            renderReservations();
            expect(react_1.screen.getByText('Select Date')).toBeInTheDocument();
        });
        it('displays 7 date buttons', () => {
            renderReservations();
            const today = new Date();
            const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            // Get all date buttons
            const dateButtons = react_1.screen.getAllByRole('button').filter(button => {
                const text = button.textContent;
                return dayNames.some(day => text?.includes(day));
            });
            expect(dateButtons).toHaveLength(7);
            // Check if first date is today
            const todayShort = today.toLocaleDateString('en-US', { weekday: 'short' });
            const todayDate = today.getDate().toString();
            expect(dateButtons[0].textContent).toContain(todayShort);
            expect(dateButtons[0].textContent).toContain(todayDate);
        });
    });
    describe('Time Selection', () => {
        it('renders time selection section', () => {
            renderReservations();
            expect(react_1.screen.getByText('Select Time')).toBeInTheDocument();
        });
        it('displays all time slots', () => {
            renderReservations();
            expect(react_1.screen.getByText('9:00 AM')).toBeInTheDocument();
            expect(react_1.screen.getByText('10:00 AM')).toBeInTheDocument();
            expect(react_1.screen.getByText('11:00 AM')).toBeInTheDocument();
            expect(react_1.screen.getByText('12:00 PM')).toBeInTheDocument();
            expect(react_1.screen.getByText('1:00 PM')).toBeInTheDocument();
            expect(react_1.screen.getByText('2:00 PM')).toBeInTheDocument();
        });
        it('disables unavailable time slots', () => {
            renderReservations();
            const tenAMSlot = react_1.screen.getByText('10:00 AM').closest('button');
            const onePMSlot = react_1.screen.getByText('1:00 PM').closest('button');
            expect(tenAMSlot).toBeDisabled();
            expect(onePMSlot).toBeDisabled();
        });
        it('enables available time slots', () => {
            renderReservations();
            const nineAMSlot = react_1.screen.getByText('9:00 AM').closest('button');
            const elevenAMSlot = react_1.screen.getByText('11:00 AM').closest('button');
            const twoPMSlot = react_1.screen.getByText('2:00 PM').closest('button');
            expect(nineAMSlot).not.toBeDisabled();
            expect(elevenAMSlot).not.toBeDisabled();
            expect(twoPMSlot).not.toBeDisabled();
        });
    });
    describe('Guest Count Selection', () => {
        it('renders guest count section', () => {
            renderReservations();
            expect(react_1.screen.getByText('Number of Guests')).toBeInTheDocument();
            expect(react_1.screen.getByText('4')).toBeInTheDocument(); // Default guest count
        });
        it('renders increment and decrement buttons', () => {
            renderReservations();
            const buttons = react_1.screen.getAllByRole('button');
            const decrementButton = buttons.find(button => button.innerHTML.includes('M20 12H4'));
            const incrementButton = buttons.find(button => button.innerHTML.includes('M12 4v16m8-8H4'));
            expect(decrementButton).toBeInTheDocument();
            expect(incrementButton).toBeInTheDocument();
        });
    });
    it('renders complete reservation button', () => {
        renderReservations();
        const completeButton = react_1.screen.getByText('Complete Reservation');
        expect(completeButton).toBeInTheDocument();
        expect(completeButton.closest('button')).toHaveClass('p-4', 'md:p-6', 'rounded-xl', 'transition-colors', 'bg-[#2d3339]', 'hover:bg-[#3a424a]', 'text-white', 'w-full');
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2VyaWNoYW1pbHQwbi9yZXBvcy9sb2RnZTJhL2wyYS1tb2JpbGUtYXBwL3NyYy9wYWdlcy9SZXNlcnZhdGlvbnMudGVzdC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBS0EsSUFBSSxDQUFDLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ3RDLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQywrQ0FBaUIsVUFBVSx5QkFBZTtJQUN6RCxTQUFTLEVBQUUsR0FBRyxFQUFFLENBQUMsK0NBQWlCLFlBQVksMkJBQWlCO0NBQ2hFLENBQUMsQ0FBQyxDQUFBO0FBUEgsa0RBQWtFO0FBQ2xFLHVEQUFnRDtBQUNoRCxrRUFBeUM7QUFPekMsUUFBUSxDQUFDLGNBQWMsRUFBRSxHQUFHLEVBQUU7SUFDNUIsTUFBTSxrQkFBa0IsR0FBRyxHQUFHLEVBQUU7UUFDOUIsSUFBQSxjQUFNLEVBQ0osdUJBQUMsZ0NBQWEsY0FDWix1QkFBQyxzQkFBWSxLQUFHLEdBQ0YsQ0FDakIsQ0FBQTtJQUNILENBQUMsQ0FBQTtJQUVELEVBQUUsQ0FBQyxpQ0FBaUMsRUFBRSxHQUFHLEVBQUU7UUFDekMsa0JBQWtCLEVBQUUsQ0FBQTtRQUNwQixNQUFNLENBQUMsY0FBTSxDQUFDLFNBQVMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQTtRQUNsRSxNQUFNLENBQUMsY0FBTSxDQUFDLFNBQVMsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQTtJQUN4RSxDQUFDLENBQUMsQ0FBQTtJQUVGLFFBQVEsQ0FBQyw0QkFBNEIsRUFBRSxHQUFHLEVBQUU7UUFDMUMsRUFBRSxDQUFDLGtDQUFrQyxFQUFFLEdBQUcsRUFBRTtZQUMxQyxrQkFBa0IsRUFBRSxDQUFBO1lBQ3BCLE1BQU0sQ0FBQyxjQUFNLENBQUMsU0FBUyxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFBO1lBQy9ELE1BQU0sQ0FBQyxjQUFNLENBQUMsU0FBUyxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFBO1lBQ2pFLE1BQU0sQ0FBQyxjQUFNLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQTtZQUMxRCxNQUFNLENBQUMsY0FBTSxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUE7UUFDOUQsQ0FBQyxDQUFDLENBQUE7SUFDSixDQUFDLENBQUMsQ0FBQTtJQUVGLFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxHQUFHLEVBQUU7UUFDOUIsRUFBRSxDQUFDLGdDQUFnQyxFQUFFLEdBQUcsRUFBRTtZQUN4QyxrQkFBa0IsRUFBRSxDQUFBO1lBQ3BCLE1BQU0sQ0FBQyxjQUFNLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQTtRQUM3RCxDQUFDLENBQUMsQ0FBQTtRQUVGLEVBQUUsQ0FBQyx5QkFBeUIsRUFBRSxHQUFHLEVBQUU7WUFDakMsa0JBQWtCLEVBQUUsQ0FBQTtZQUNwQixNQUFNLEtBQUssR0FBRyxJQUFJLElBQUksRUFBRSxDQUFBO1lBQ3hCLE1BQU0sUUFBUSxHQUFHLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUE7WUFFbEUsdUJBQXVCO1lBQ3ZCLE1BQU0sV0FBVyxHQUFHLGNBQU0sQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFO2dCQUNoRSxNQUFNLElBQUksR0FBRyxNQUFNLENBQUMsV0FBVyxDQUFBO2dCQUMvQixPQUFPLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUE7WUFDbEQsQ0FBQyxDQUFDLENBQUE7WUFFRixNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFBO1lBRW5DLCtCQUErQjtZQUMvQixNQUFNLFVBQVUsR0FBRyxLQUFLLENBQUMsa0JBQWtCLENBQUMsT0FBTyxFQUFFLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUE7WUFDMUUsTUFBTSxTQUFTLEdBQUcsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFBO1lBQzVDLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFBO1lBQ3hELE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFBO1FBQ3pELENBQUMsQ0FBQyxDQUFBO0lBQ0osQ0FBQyxDQUFDLENBQUE7SUFFRixRQUFRLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO1FBQzlCLEVBQUUsQ0FBQyxnQ0FBZ0MsRUFBRSxHQUFHLEVBQUU7WUFDeEMsa0JBQWtCLEVBQUUsQ0FBQTtZQUNwQixNQUFNLENBQUMsY0FBTSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUE7UUFDN0QsQ0FBQyxDQUFDLENBQUE7UUFFRixFQUFFLENBQUMseUJBQXlCLEVBQUUsR0FBRyxFQUFFO1lBQ2pDLGtCQUFrQixFQUFFLENBQUE7WUFDcEIsTUFBTSxDQUFDLGNBQU0sQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFBO1lBQ3ZELE1BQU0sQ0FBQyxjQUFNLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQTtZQUN4RCxNQUFNLENBQUMsY0FBTSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUE7WUFDeEQsTUFBTSxDQUFDLGNBQU0sQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFBO1lBQ3hELE1BQU0sQ0FBQyxjQUFNLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQTtZQUN2RCxNQUFNLENBQUMsY0FBTSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUE7UUFDekQsQ0FBQyxDQUFDLENBQUE7UUFFRixFQUFFLENBQUMsaUNBQWlDLEVBQUUsR0FBRyxFQUFFO1lBQ3pDLGtCQUFrQixFQUFFLENBQUE7WUFDcEIsTUFBTSxTQUFTLEdBQUcsY0FBTSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUE7WUFDaEUsTUFBTSxTQUFTLEdBQUcsY0FBTSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUE7WUFFL0QsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLFlBQVksRUFBRSxDQUFBO1lBQ2hDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxZQUFZLEVBQUUsQ0FBQTtRQUNsQyxDQUFDLENBQUMsQ0FBQTtRQUVGLEVBQUUsQ0FBQyw4QkFBOEIsRUFBRSxHQUFHLEVBQUU7WUFDdEMsa0JBQWtCLEVBQUUsQ0FBQTtZQUNwQixNQUFNLFVBQVUsR0FBRyxjQUFNLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQTtZQUNoRSxNQUFNLFlBQVksR0FBRyxjQUFNLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQTtZQUNuRSxNQUFNLFNBQVMsR0FBRyxjQUFNLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQTtZQUUvRCxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBRSxDQUFBO1lBQ3JDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFFLENBQUE7WUFDdkMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUUsQ0FBQTtRQUN0QyxDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUMsQ0FBQyxDQUFBO0lBRUYsUUFBUSxDQUFDLHVCQUF1QixFQUFFLEdBQUcsRUFBRTtRQUNyQyxFQUFFLENBQUMsNkJBQTZCLEVBQUUsR0FBRyxFQUFFO1lBQ3JDLGtCQUFrQixFQUFFLENBQUE7WUFDcEIsTUFBTSxDQUFDLGNBQU0sQ0FBQyxTQUFTLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUE7WUFDaEUsTUFBTSxDQUFDLGNBQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFBLENBQUMsc0JBQXNCO1FBQzFFLENBQUMsQ0FBQyxDQUFBO1FBRUYsRUFBRSxDQUFDLHlDQUF5QyxFQUFFLEdBQUcsRUFBRTtZQUNqRCxrQkFBa0IsRUFBRSxDQUFBO1lBQ3BCLE1BQU0sT0FBTyxHQUFHLGNBQU0sQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUE7WUFDN0MsTUFBTSxlQUFlLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUE7WUFDckYsTUFBTSxlQUFlLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQTtZQUUzRixNQUFNLENBQUMsZUFBZSxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQTtZQUMzQyxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQTtRQUM3QyxDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUMsQ0FBQyxDQUFBO0lBRUYsRUFBRSxDQUFDLHFDQUFxQyxFQUFFLEdBQUcsRUFBRTtRQUM3QyxrQkFBa0IsRUFBRSxDQUFBO1FBQ3BCLE1BQU0sY0FBYyxHQUFHLGNBQU0sQ0FBQyxTQUFTLENBQUMsc0JBQXNCLENBQUMsQ0FBQTtRQUMvRCxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQTtRQUMxQyxNQUFNLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsUUFBUSxFQUFFLFlBQVksRUFBRSxtQkFBbUIsRUFBRSxjQUFjLEVBQUUsb0JBQW9CLEVBQUUsWUFBWSxFQUFFLFFBQVEsQ0FBQyxDQUFBO0lBQ3hLLENBQUMsQ0FBQyxDQUFBO0FBQ0osQ0FBQyxDQUFDLENBQUEiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2VyaWNoYW1pbHQwbi9yZXBvcy9sb2RnZTJhL2wyYS1tb2JpbGUtYXBwL3NyYy9wYWdlcy9SZXNlcnZhdGlvbnMudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIGZpcmVFdmVudCB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnXG5pbXBvcnQgeyBCcm93c2VyUm91dGVyIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSdcbmltcG9ydCBSZXNlcnZhdGlvbnMgZnJvbSAnLi9SZXNlcnZhdGlvbnMnXG5cbmplc3QubW9jaygnLi4vY29tcG9uZW50cy9pY29ucycsICgpID0+ICh7XG4gIEJheUljb246ICgpID0+IDxkaXYgZGF0YS10ZXN0aWQ9XCJiYXktaWNvblwiPkJheSBJY29uPC9kaXY+LFxuICBUYWJsZUljb246ICgpID0+IDxkaXYgZGF0YS10ZXN0aWQ9XCJ0YWJsZS1pY29uXCI+VGFibGUgSWNvbjwvZGl2Pixcbn0pKVxuXG5kZXNjcmliZSgnUmVzZXJ2YXRpb25zJywgKCkgPT4ge1xuICBjb25zdCByZW5kZXJSZXNlcnZhdGlvbnMgPSAoKSA9PiB7XG4gICAgcmVuZGVyKFxuICAgICAgPEJyb3dzZXJSb3V0ZXI+XG4gICAgICAgIDxSZXNlcnZhdGlvbnMgLz5cbiAgICAgIDwvQnJvd3NlclJvdXRlcj5cbiAgICApXG4gIH1cblxuICBpdCgncmVuZGVycyByZXNlcnZhdGlvbiBwYWdlIGhlYWRlcicsICgpID0+IHtcbiAgICByZW5kZXJSZXNlcnZhdGlvbnMoKVxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdNYWtlIGEgUmVzZXJ2YXRpb24nKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdCb29rIHlvdXIgYmF5IG9yIHRhYmxlJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgfSlcblxuICBkZXNjcmliZSgnUmVzZXJ2YXRpb24gVHlwZSBTZWxlY3Rpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3JlbmRlcnMgcmVzZXJ2YXRpb24gdHlwZSBidXR0b25zJywgKCkgPT4ge1xuICAgICAgcmVuZGVyUmVzZXJ2YXRpb25zKClcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdCYXkgUmVzZXJ2YXRpb24nKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1RhYmxlIFJlc2VydmF0aW9uJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2JheS1pY29uJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3RhYmxlLWljb24nKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ0RhdGUgU2VsZWN0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdyZW5kZXJzIGRhdGUgc2VsZWN0aW9uIHNlY3Rpb24nLCAoKSA9PiB7XG4gICAgICByZW5kZXJSZXNlcnZhdGlvbnMoKVxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1NlbGVjdCBEYXRlJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICB9KVxuXG4gICAgaXQoJ2Rpc3BsYXlzIDcgZGF0ZSBidXR0b25zJywgKCkgPT4ge1xuICAgICAgcmVuZGVyUmVzZXJ2YXRpb25zKClcbiAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxuICAgICAgY29uc3QgZGF5TmFtZXMgPSBbJ1N1bicsICdNb24nLCAnVHVlJywgJ1dlZCcsICdUaHUnLCAnRnJpJywgJ1NhdCddXG4gICAgICBcbiAgICAgIC8vIEdldCBhbGwgZGF0ZSBidXR0b25zXG4gICAgICBjb25zdCBkYXRlQnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2J1dHRvbicpLmZpbHRlcihidXR0b24gPT4ge1xuICAgICAgICBjb25zdCB0ZXh0ID0gYnV0dG9uLnRleHRDb250ZW50XG4gICAgICAgIHJldHVybiBkYXlOYW1lcy5zb21lKGRheSA9PiB0ZXh0Py5pbmNsdWRlcyhkYXkpKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZXhwZWN0KGRhdGVCdXR0b25zKS50b0hhdmVMZW5ndGgoNylcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgZmlyc3QgZGF0ZSBpcyB0b2RheVxuICAgICAgY29uc3QgdG9kYXlTaG9ydCA9IHRvZGF5LnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tVVMnLCB7IHdlZWtkYXk6ICdzaG9ydCcgfSlcbiAgICAgIGNvbnN0IHRvZGF5RGF0ZSA9IHRvZGF5LmdldERhdGUoKS50b1N0cmluZygpXG4gICAgICBleHBlY3QoZGF0ZUJ1dHRvbnNbMF0udGV4dENvbnRlbnQpLnRvQ29udGFpbih0b2RheVNob3J0KVxuICAgICAgZXhwZWN0KGRhdGVCdXR0b25zWzBdLnRleHRDb250ZW50KS50b0NvbnRhaW4odG9kYXlEYXRlKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ1RpbWUgU2VsZWN0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdyZW5kZXJzIHRpbWUgc2VsZWN0aW9uIHNlY3Rpb24nLCAoKSA9PiB7XG4gICAgICByZW5kZXJSZXNlcnZhdGlvbnMoKVxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1NlbGVjdCBUaW1lJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICB9KVxuXG4gICAgaXQoJ2Rpc3BsYXlzIGFsbCB0aW1lIHNsb3RzJywgKCkgPT4ge1xuICAgICAgcmVuZGVyUmVzZXJ2YXRpb25zKClcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCc5OjAwIEFNJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcxMDowMCBBTScpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnMTE6MDAgQU0nKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJzEyOjAwIFBNJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcxOjAwIFBNJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcyOjAwIFBNJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICB9KVxuXG4gICAgaXQoJ2Rpc2FibGVzIHVuYXZhaWxhYmxlIHRpbWUgc2xvdHMnLCAoKSA9PiB7XG4gICAgICByZW5kZXJSZXNlcnZhdGlvbnMoKVxuICAgICAgY29uc3QgdGVuQU1TbG90ID0gc2NyZWVuLmdldEJ5VGV4dCgnMTA6MDAgQU0nKS5jbG9zZXN0KCdidXR0b24nKVxuICAgICAgY29uc3Qgb25lUE1TbG90ID0gc2NyZWVuLmdldEJ5VGV4dCgnMTowMCBQTScpLmNsb3Nlc3QoJ2J1dHRvbicpXG4gICAgICBcbiAgICAgIGV4cGVjdCh0ZW5BTVNsb3QpLnRvQmVEaXNhYmxlZCgpXG4gICAgICBleHBlY3Qob25lUE1TbG90KS50b0JlRGlzYWJsZWQoKVxuICAgIH0pXG5cbiAgICBpdCgnZW5hYmxlcyBhdmFpbGFibGUgdGltZSBzbG90cycsICgpID0+IHtcbiAgICAgIHJlbmRlclJlc2VydmF0aW9ucygpXG4gICAgICBjb25zdCBuaW5lQU1TbG90ID0gc2NyZWVuLmdldEJ5VGV4dCgnOTowMCBBTScpLmNsb3Nlc3QoJ2J1dHRvbicpXG4gICAgICBjb25zdCBlbGV2ZW5BTVNsb3QgPSBzY3JlZW4uZ2V0QnlUZXh0KCcxMTowMCBBTScpLmNsb3Nlc3QoJ2J1dHRvbicpXG4gICAgICBjb25zdCB0d29QTVNsb3QgPSBzY3JlZW4uZ2V0QnlUZXh0KCcyOjAwIFBNJykuY2xvc2VzdCgnYnV0dG9uJylcbiAgICAgIFxuICAgICAgZXhwZWN0KG5pbmVBTVNsb3QpLm5vdC50b0JlRGlzYWJsZWQoKVxuICAgICAgZXhwZWN0KGVsZXZlbkFNU2xvdCkubm90LnRvQmVEaXNhYmxlZCgpXG4gICAgICBleHBlY3QodHdvUE1TbG90KS5ub3QudG9CZURpc2FibGVkKClcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdHdWVzdCBDb3VudCBTZWxlY3Rpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3JlbmRlcnMgZ3Vlc3QgY291bnQgc2VjdGlvbicsICgpID0+IHtcbiAgICAgIHJlbmRlclJlc2VydmF0aW9ucygpXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnTnVtYmVyIG9mIEd1ZXN0cycpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnNCcpKS50b0JlSW5UaGVEb2N1bWVudCgpIC8vIERlZmF1bHQgZ3Vlc3QgY291bnRcbiAgICB9KVxuXG4gICAgaXQoJ3JlbmRlcnMgaW5jcmVtZW50IGFuZCBkZWNyZW1lbnQgYnV0dG9ucycsICgpID0+IHtcbiAgICAgIHJlbmRlclJlc2VydmF0aW9ucygpXG4gICAgICBjb25zdCBidXR0b25zID0gc2NyZWVuLmdldEFsbEJ5Um9sZSgnYnV0dG9uJylcbiAgICAgIGNvbnN0IGRlY3JlbWVudEJ1dHRvbiA9IGJ1dHRvbnMuZmluZChidXR0b24gPT4gYnV0dG9uLmlubmVySFRNTC5pbmNsdWRlcygnTTIwIDEySDQnKSlcbiAgICAgIGNvbnN0IGluY3JlbWVudEJ1dHRvbiA9IGJ1dHRvbnMuZmluZChidXR0b24gPT4gYnV0dG9uLmlubmVySFRNTC5pbmNsdWRlcygnTTEyIDR2MTZtOC04SDQnKSlcbiAgICAgIFxuICAgICAgZXhwZWN0KGRlY3JlbWVudEJ1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgICAgZXhwZWN0KGluY3JlbWVudEJ1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIH0pXG4gIH0pXG5cbiAgaXQoJ3JlbmRlcnMgY29tcGxldGUgcmVzZXJ2YXRpb24gYnV0dG9uJywgKCkgPT4ge1xuICAgIHJlbmRlclJlc2VydmF0aW9ucygpXG4gICAgY29uc3QgY29tcGxldGVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KCdDb21wbGV0ZSBSZXNlcnZhdGlvbicpXG4gICAgZXhwZWN0KGNvbXBsZXRlQnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgZXhwZWN0KGNvbXBsZXRlQnV0dG9uLmNsb3Nlc3QoJ2J1dHRvbicpKS50b0hhdmVDbGFzcygncC00JywgJ21kOnAtNicsICdyb3VuZGVkLXhsJywgJ3RyYW5zaXRpb24tY29sb3JzJywgJ2JnLVsjMmQzMzM5XScsICdob3ZlcjpiZy1bIzNhNDI0YV0nLCAndGV4dC13aGl0ZScsICd3LWZ1bGwnKVxuICB9KVxufSlcbiJdLCJ2ZXJzaW9uIjozfQ==