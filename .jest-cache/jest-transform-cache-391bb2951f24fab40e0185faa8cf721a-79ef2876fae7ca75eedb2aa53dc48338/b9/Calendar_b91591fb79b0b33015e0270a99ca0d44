b30643e539db506bbecebacb2a53304c
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
function Calendar({ onDateSelect, selectedDate = new Date(), minDate, maxDate, }) {
    const [currentMonth, setCurrentMonth] = (0, react_1.useState)(selectedDate.getMonth());
    const [currentYear, setCurrentYear] = (0, react_1.useState)(selectedDate.getFullYear());
    const months = [
        'January',
        'February',
        'March',
        'April',
        'May',
        'June',
        'July',
        'August',
        'September',
        'October',
        'November',
        'December',
    ];
    const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
    const firstDayOfMonth = new Date(currentYear, currentMonth, 1).getDay();
    const generateCalendarDays = () => {
        const days = [];
        const previousMonthDays = new Date(currentYear, currentMonth, 0).getDate();
        // Previous month days
        for (let i = firstDayOfMonth - 1; i >= 0; i--) {
            days.push({
                day: previousMonthDays - i,
                isCurrentMonth: false,
                isPast: true,
            });
        }
        // Current month days
        const today = new Date();
        for (let i = 1; i <= daysInMonth; i++) {
            const date = new Date(currentYear, currentMonth, i);
            const isDisabled = (minDate && date < minDate) || (maxDate && date > maxDate);
            days.push({
                day: i,
                isCurrentMonth: true,
                isToday: i === today.getDate() &&
                    currentMonth === today.getMonth() &&
                    currentYear === today.getFullYear(),
                isSelected: i === selectedDate.getDate() &&
                    currentMonth === selectedDate.getMonth() &&
                    currentYear === selectedDate.getFullYear(),
                isDisabled,
            });
        }
        // Next month days
        const remainingDays = 42 - days.length; // 6 rows * 7 days = 42
        for (let i = 1; i <= remainingDays; i++) {
            days.push({
                day: i,
                isCurrentMonth: false,
                isFuture: true,
            });
        }
        return days;
    };
    const handlePreviousMonth = () => {
        if (currentMonth === 0) {
            setCurrentMonth(11);
            setCurrentYear(currentYear - 1);
        }
        else {
            setCurrentMonth(currentMonth - 1);
        }
    };
    const handleNextMonth = () => {
        if (currentMonth === 11) {
            setCurrentMonth(0);
            setCurrentYear(currentYear + 1);
        }
        else {
            setCurrentMonth(currentMonth + 1);
        }
    };
    const handleDateClick = (day, isCurrentMonth) => {
        if (!isCurrentMonth)
            return;
        const selectedDate = new Date(currentYear, currentMonth, day);
        if (minDate && selectedDate < minDate)
            return;
        if (maxDate && selectedDate > maxDate)
            return;
        onDateSelect?.(selectedDate);
    };
    return ((0, jsx_runtime_1.jsxs)("div", { className: "bg-dark-100 rounded-2xl p-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between items-center mb-6", children: [(0, jsx_runtime_1.jsx)("button", { onClick: handlePreviousMonth, className: "p-2 hover:bg-dark-200 rounded-xl text-white transition-colors", "aria-label": "previous-month", children: (0, jsx_runtime_1.jsx)("svg", { className: "w-6 h-6", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: (0, jsx_runtime_1.jsx)("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M15 19l-7-7 7-7" }) }) }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-2", children: [(0, jsx_runtime_1.jsx)("select", { value: currentMonth, onChange: e => {
                                    setCurrentMonth(parseInt(e.target.value));
                                }, className: "bg-dark-200 text-black px-3 py-1 rounded-xl", "aria-label": "select-month", children: months.map((month, index) => ((0, jsx_runtime_1.jsx)("option", { value: index, className: "text-black", children: month }, month))) }), (0, jsx_runtime_1.jsx)("select", { value: currentYear, onChange: e => {
                                    setCurrentYear(parseInt(e.target.value));
                                }, className: "bg-dark-200 text-black px-3 py-1 rounded-xl", "aria-label": "select-year", children: Array.from({ length: 10 }, (_, i) => currentYear - 5 + i).map(year => ((0, jsx_runtime_1.jsx)("option", { value: year, className: "text-black", children: year }, year))) })] }), (0, jsx_runtime_1.jsx)("button", { onClick: handleNextMonth, className: "p-2 hover:bg-dark-200 rounded-xl text-white transition-colors", "aria-label": "next-month", children: (0, jsx_runtime_1.jsx)("svg", { className: "w-6 h-6", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: (0, jsx_runtime_1.jsx)("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M9 5l7 7-7 7" }) }) })] }), (0, jsx_runtime_1.jsx)("div", { className: "grid grid-cols-7 gap-1 mb-2", children: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => ((0, jsx_runtime_1.jsx)("div", { className: "text-center text-gray-400 text-sm py-2", children: day }, day))) }), (0, jsx_runtime_1.jsx)("div", { className: "grid grid-cols-7 gap-1", children: generateCalendarDays().map((day, index) => ((0, jsx_runtime_1.jsx)("button", { onClick: () => {
                        handleDateClick(day.day, day.isCurrentMonth);
                    }, disabled: day.isDisabled || !day.isCurrentMonth, className: `
              p-2 rounded-xl text-center transition-colors
              ${day.isCurrentMonth
                        ? day.isToday
                            ? 'bg-[#333e48] text-white'
                            : day.isSelected
                                ? 'bg-[#333e48] text-white'
                                : 'text-white hover:bg-dark-200'
                        : 'text-gray-600'}
              ${day.isDisabled || !day.isCurrentMonth ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}
            `, children: day.day }, index))) })] }));
}
exports.default = Calendar;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2VyaWNoYW1pbHQwbi9yZXBvcy9sb2RnZTJhL2wyYS1tb2JpbGUtYXBwL3NyYy9jb21wb25lbnRzL0NhbGVuZGFyLnRzeCIsIm1hcHBpbmdzIjoiOzs7QUFBQSxpQ0FBZ0M7QUFTaEMsU0FBd0IsUUFBUSxDQUFDLEVBQy9CLFlBQVksRUFDWixZQUFZLEdBQUcsSUFBSSxJQUFJLEVBQUUsRUFDekIsT0FBTyxFQUNQLE9BQU8sR0FDTztJQUNkLE1BQU0sQ0FBQyxZQUFZLEVBQUUsZUFBZSxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLFlBQVksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFBO0lBQ3pFLE1BQU0sQ0FBQyxXQUFXLEVBQUUsY0FBYyxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLFlBQVksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFBO0lBRTFFLE1BQU0sTUFBTSxHQUFHO1FBQ2IsU0FBUztRQUNULFVBQVU7UUFDVixPQUFPO1FBQ1AsT0FBTztRQUNQLEtBQUs7UUFDTCxNQUFNO1FBQ04sTUFBTTtRQUNOLFFBQVE7UUFDUixXQUFXO1FBQ1gsU0FBUztRQUNULFVBQVU7UUFDVixVQUFVO0tBQ1gsQ0FBQTtJQUVELE1BQU0sV0FBVyxHQUFHLElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRSxZQUFZLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFBO0lBQ3hFLE1BQU0sZUFBZSxHQUFHLElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRSxZQUFZLEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUE7SUFFdkUsTUFBTSxvQkFBb0IsR0FBRyxHQUFHLEVBQUU7UUFDaEMsTUFBTSxJQUFJLEdBQUcsRUFBRSxDQUFBO1FBQ2YsTUFBTSxpQkFBaUIsR0FBRyxJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUUsWUFBWSxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFBO1FBRTFFLHNCQUFzQjtRQUN0QixLQUFLLElBQUksQ0FBQyxHQUFHLGVB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QyxHQUFHLEVBQUUsR0FBRyxDQUFDLGNBQWMsQ0FBQyxDQUFBO29CQUM5QyxDQUFDLEVBQ0QsUUFBUSxFQUFFLEdBQUcsQ0FBQyxVQUFVLElBQUksQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUMvQyxTQUFTLEVBQUU7O2dCQUdQLEdBQUcsQ0FBQyxjQUFjO3dCQUNoQixDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU87NEJBQ1gsQ0FBQyxDQUFDLHlCQUF5Qjs0QkFDM0IsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxVQUFVO2dDQUNkLENBQUMsQ0FBQyx5QkFBeUI7Z0NBQzNCLENBQUMsQ0FBQyw4QkFBOEI7d0JBQ3BDLENBQUMsQ0FBQyxlQUNOO2dCQUNFLEdBQUcsQ0FBQyxVQUFVLElBQUksQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQywrQkFBK0IsQ0FBQyxDQUFDLENBQUMsZ0JBQWdCO2FBQzdGLFlBRUEsR0FBRyxDQUFDLEdBQUcsSUFuQkgsS0FBSyxDQW9CSCxDQUNWLENBQUMsR0FDRSxJQUNGLENBQ1AsQ0FBQTtBQUNILENBQUM7QUFwTUQsMkJBb01DIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9lcmljaGFtaWx0MG4vcmVwb3MvbG9kZ2UyYS9sMmEtbW9iaWxlLWFwcC9zcmMvY29tcG9uZW50cy9DYWxlbmRhci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCdcblxuaW50ZXJmYWNlIENhbGVuZGFyUHJvcHMge1xuICBvbkRhdGVTZWxlY3Q/OiAoZGF0ZTogRGF0ZSkgPT4gdm9pZFxuICBzZWxlY3RlZERhdGU/OiBEYXRlXG4gIG1pbkRhdGU/OiBEYXRlXG4gIG1heERhdGU/OiBEYXRlXG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENhbGVuZGFyKHtcbiAgb25EYXRlU2VsZWN0LFxuICBzZWxlY3RlZERhdGUgPSBuZXcgRGF0ZSgpLFxuICBtaW5EYXRlLFxuICBtYXhEYXRlLFxufTogQ2FsZW5kYXJQcm9wcykge1xuICBjb25zdCBbY3VycmVudE1vbnRoLCBzZXRDdXJyZW50TW9udGhdID0gdXNlU3RhdGUoc2VsZWN0ZWREYXRlLmdldE1vbnRoKCkpXG4gIGNvbnN0IFtjdXJyZW50WWVhciwgc2V0Q3VycmVudFllYXJdID0gdXNlU3RhdGUoc2VsZWN0ZWREYXRlLmdldEZ1bGxZZWFyKCkpXG5cbiAgY29uc3QgbW9udGhzID0gW1xuICAgICdKYW51YXJ5JyxcbiAgICAnRmVicnVhcnknLFxuICAgICdNYXJjaCcsXG4gICAgJ0FwcmlsJyxcbiAgICAnTWF5JyxcbiAgICAnSnVuZScsXG4gICAgJ0p1bHknLFxuICAgICdBdWd1c3QnLFxuICAgICdTZXB0ZW1iZXInLFxuICAgICdPY3RvYmVyJyxcbiAgICAnTm92ZW1iZXInLFxuICAgICdEZWNlbWJlcicsXG4gIF1cblxuICBjb25zdCBkYXlzSW5Nb250aCA9IG5ldyBEYXRlKGN1cnJlbnRZZWFyLCBjdXJyZW50TW9udGggKyAxLCAwKS5nZXREYXRlKClcbiAgY29uc3QgZmlyc3REYXlPZk1vbnRoID0gbmV3IERhdGUoY3VycmVudFllYXIsIGN1cnJlbnRNb250aCwgMSkuZ2V0RGF5KClcblxuICBjb25zdCBnZW5lcmF0ZUNhbGVuZGFyRGF5cyA9ICgpID0+IHtcbiAgICBjb25zdCBkYXlzID0gW11cbiAgICBjb25zdCBwcmV2aW91c01vbnRoRGF5cyA9IG5ldyBEYXRlKGN1cnJlbnRZZWFyLCBjdXJyZW50TW9udGgsIDApLmdldERhdGUoKVxuXG4gICAgLy8gUHJldmlvdXMgbW9udGggZGF5c1xuICAgIGZvciAobGV0IGkgPSBmaXJzdERheU9mTW9udGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgZGF5cy5wdXNoKHtcbiAgICAgICAgZGF5OiBwcmV2aW91c01vbnRoRGF5cyAtIGksXG4gICAgICAgIGlzQ3VycmVudE1vbnRoOiBmYWxzZSxcbiAgICAgICAgaXNQYXN0OiB0cnVlLFxuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBDdXJyZW50IG1vbnRoIGRheXNcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKClcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBkYXlzSW5Nb250aDsgaSsrKSB7XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoY3VycmVudFllYXIsIGN1cnJlbnRNb250aCwgaSlcbiAgICAgIGNvbnN0IGlzRGlzYWJsZWQgPSAobWluRGF0ZSAmJiBkYXRlIDwgbWluRGF0ZSkgfHwgKG1heERhdGUgJiYgZGF0ZSA+IG1heERhdGUpXG5cbiAgICAgIGRheXMucHVzaCh7XG4gICAgICAgIGRheTogaSxcbiAgICAgICAgaXNDdXJyZW50TW9udGg6IHRydWUsXG4gICAgICAgIGlzVG9kYXk6XG4gICAgICAgICAgaSA9PT0gdG9kYXkuZ2V0RGF0ZSgpICYmXG4gICAgICAgICAgY3VycmVudE1vbnRoID09PSB0b2RheS5nZXRNb250aCgpICYmXG4gICAgICAgICAgY3VycmVudFllYXIgPT09IHRvZGF5LmdldEZ1bGxZZWFyKCksXG4gICAgICAgIGlzU2VsZWN0ZWQ6XG4gICAgICAgICAgaSA9PT0gc2VsZWN0ZWREYXRlLmdldERhdGUoKSAmJlxuICAgICAgICAgIGN1cnJlbnRNb250aCA9PT0gc2VsZWN0ZWREYXRlLmdldE1vbnRoKCkgJiZcbiAgICAgICAgICBjdXJyZW50WWVhciA9PT0gc2VsZWN0ZWREYXRlLmdldEZ1bGxZZWFyKCksXG4gICAgICAgIGlzRGlzYWJsZWQsXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIE5leHQgbW9udGggZGF5c1xuICAgIGNvbnN0IHJlbWFpbmluZ0RheXMgPSA0MiAtIGRheXMubGVuZ3RoIC8vIDYgcm93cyAqIDcgZGF5cyA9IDQyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gcmVtYWluaW5nRGF5czsgaSsrKSB7XG4gICAgICBkYXlzLnB1c2goe1xuICAgICAgICBkYXk6IGksXG4gICAgICAgIGlzQ3VycmVudE1vbnRoOiBmYWxzZSxcbiAgICAgICAgaXNGdXR1cmU6IHRydWUsXG4gICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiBkYXlzXG4gIH1cblxuICBjb25zdCBoYW5kbGVQcmV2aW91c01vbnRoID0gKCkgPT4ge1xuICAgIGlmIChjdXJyZW50TW9udGggPT09IDApIHtcbiAgICAgIHNldEN1cnJlbnRNb250aCgxMSlcbiAgICAgIHNldEN1cnJlbnRZZWFyKGN1cnJlbnRZZWFyIC0gMSlcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0Q3VycmVudE1vbnRoKGN1cnJlbnRNb250aCAtIDEpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgaGFuZGxlTmV4dE1vbnRoID0gKCkgPT4ge1xuICAgIGlmIChjdXJyZW50TW9udGggPT09IDExKSB7XG4gICAgICBzZXRDdXJyZW50TW9udGgoMClcbiAgICAgIHNldEN1cnJlbnRZZWFyKGN1cnJlbnRZZWFyICsgMSlcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0Q3VycmVudE1vbnRoKGN1cnJlbnRNb250aCArIDEpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgaGFuZGxlRGF0ZUNsaWNrID0gKGRheTogbnVtYmVyLCBpc0N1cnJlbnRNb250aDogYm9vbGVhbikgPT4ge1xuICAgIGlmICghaXNDdXJyZW50TW9udGgpIHJldHVyblxuXG4gICAgY29uc3Qgc2VsZWN0ZWREYXRlID0gbmV3IERhdGUoY3VycmVudFllYXIsIGN1cnJlbnRNb250aCwgZGF5KVxuICAgIGlmIChtaW5EYXRlICYmIHNlbGVjdGVkRGF0ZSA8IG1pbkRhdGUpIHJldHVyblxuICAgIGlmIChtYXhEYXRlICYmIHNlbGVjdGVkRGF0ZSA+IG1heERhdGUpIHJldHVyblxuXG4gICAgb25EYXRlU2VsZWN0Py4oc2VsZWN0ZWREYXRlKVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWRhcmstMTAwIHJvdW5kZWQtMnhsIHAtNlwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbWItNlwiPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgb25DbGljaz17aGFuZGxlUHJldmlvdXNNb250aH1cbiAgICAgICAgICBjbGFzc05hbWU9XCJwLTIgaG92ZXI6YmctZGFyay0yMDAgcm91bmRlZC14bCB0ZXh0LXdoaXRlIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICBhcmlhLWxhYmVsPVwicHJldmlvdXMtbW9udGhcIlxuICAgICAgICA+XG4gICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJ3LTYgaC02XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gICAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgICBzdHJva2VMaW5lY2FwPVwicm91bmRcIlxuICAgICAgICAgICAgICBzdHJva2VMaW5lam9pbj1cInJvdW5kXCJcbiAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9ezJ9XG4gICAgICAgICAgICAgIGQ9XCJNMTUgMTlsLTctNyA3LTdcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgPHNlbGVjdFxuICAgICAgICAgICAgdmFsdWU9e2N1cnJlbnRNb250aH1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHtcbiAgICAgICAgICAgICAgc2V0Q3VycmVudE1vbnRoKHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKSlcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1kYXJrLTIwMCB0ZXh0LWJsYWNrIHB4LTMgcHktMSByb3VuZGVkLXhsXCJcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJzZWxlY3QtbW9udGhcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIHttb250aHMubWFwKChtb250aCwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e21vbnRofSB2YWx1ZT17aW5kZXh9IGNsYXNzTmFtZT1cInRleHQtYmxhY2tcIj5cbiAgICAgICAgICAgICAgICB7bW9udGh9XG4gICAgICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgPHNlbGVjdFxuICAgICAgICAgICAgdmFsdWU9e2N1cnJlbnRZZWFyfVxuICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4ge1xuICAgICAgICAgICAgICBzZXRDdXJyZW50WWVhcihwYXJzZUludChlLnRhcmdldC52YWx1ZSkpXG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctZGFyay0yMDAgdGV4dC1ibGFjayBweC0zIHB5LTEgcm91bmRlZC14bFwiXG4gICAgICAgICAgICBhcmlhLWxhYmVsPVwic2VsZWN0LXllYXJcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMCB9LCAoXywgaSkgPT4gY3VycmVudFllYXIgLSA1ICsgaSkubWFwKHllYXIgPT4gKFxuICAgICAgICAgICAgICA8b3B0aW9uIGtleT17eWVhcn0gdmFsdWU9e3llYXJ9IGNsYXNzTmFtZT1cInRleHQtYmxhY2tcIj5cbiAgICAgICAgICAgICAgICB7eWVhcn1cbiAgICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVOZXh0TW9udGh9XG4gICAgICAgICAgY2xhc3NOYW1lPVwicC0yIGhvdmVyOmJnLWRhcmstMjAwIHJvdW5kZWQteGwgdGV4dC13aGl0ZSB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgYXJpYS1sYWJlbD1cIm5leHQtbW9udGhcIlxuICAgICAgICA+XG4gICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJ3LTYgaC02XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNOSA1bDcgNy03IDdcIiAvPlxuICAgICAgICAgIDwvc3ZnPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTcgZ2FwLTEgbWItMlwiPlxuICAgICAgICB7WydTdW4nLCAnTW9uJywgJ1R1ZScsICdXZWQnLCAnVGh1JywgJ0ZyaScsICdTYXQnXS5tYXAoZGF5ID0+IChcbiAgICAgICAgICA8ZGl2IGtleT17ZGF5fSBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciB0ZXh0LWdyYXktNDAwIHRleHQtc20gcHktMlwiPlxuICAgICAgICAgICAge2RheX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKSl9XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy03IGdhcC0xXCI+XG4gICAgICAgIHtnZW5lcmF0ZUNhbGVuZGFyRGF5cygpLm1hcCgoZGF5LCBpbmRleCkgPT4gKFxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIGtleT17aW5kZXh9XG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgIGhhbmRsZURhdGVDbGljayhkYXkuZGF5LCBkYXkuaXNDdXJyZW50TW9udGgpXG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgZGlzYWJsZWQ9e2RheS5pc0Rpc2FibGVkIHx8ICFkYXkuaXNDdXJyZW50TW9udGh9XG4gICAgICAgICAgICBjbGFzc05hbWU9e2BcbiAgICAgICAgICAgICAgcC0yIHJvdW5kZWQteGwgdGV4dC1jZW50ZXIgdHJhbnNpdGlvbi1jb2xvcnNcbiAgICAgICAgICAgICAgJHtcbiAgICAgICAgICAgICAgICBkYXkuaXNDdXJyZW50TW9udGhcbiAgICAgICAgICAgICAgICAgID8gZGF5LmlzVG9kYXlcbiAgICAgICAgICAgICAgICAgICAgPyAnYmctWyMzMzNlNDhdIHRleHQtd2hpdGUnXG4gICAgICAgICAgICAgICAgICAgIDogZGF5LmlzU2VsZWN0ZWRcbiAgICAgICAgICAgICAgICAgICAgICA/ICdiZy1bIzMzM2U0OF0gdGV4dC13aGl0ZSdcbiAgICAgICAgICAgICAgICAgICAgICA6ICd0ZXh0LXdoaXRlIGhvdmVyOmJnLWRhcmstMjAwJ1xuICAgICAgICAgICAgICAgICAgOiAndGV4dC1ncmF5LTYwMCdcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAke2RheS5pc0Rpc2FibGVkIHx8ICFkYXkuaXNDdXJyZW50TW9udGggPyAnb3BhY2l0eS01MCBjdXJzb3Itbm90LWFsbG93ZWQnIDogJ2N1cnNvci1wb2ludGVyJ31cbiAgICAgICAgICAgIGB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2RheS5kYXl9XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICkpfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1cbiJdLCJ2ZXJzaW9uIjozfQ==