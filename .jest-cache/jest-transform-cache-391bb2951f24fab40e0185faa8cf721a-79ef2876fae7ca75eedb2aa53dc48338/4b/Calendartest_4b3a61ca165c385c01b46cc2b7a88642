27d88ce5940e787ae03e2fc33ed736af
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("@testing-library/react");
const Calendar_1 = __importDefault(require("./Calendar"));
describe('Calendar', () => {
    const mockOnDateSelect = jest.fn();
    beforeEach(() => {
        jest.clearAllMocks();
        // Mock current date to ensure consistent testing
        jest.useFakeTimers();
        jest.setSystemTime(new Date(2024, 0, 1)); // January 1, 2024
    });
    afterEach(() => {
        jest.useRealTimers();
    });
    it('renders calendar with correct month and year', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(Calendar_1.default, { onDateSelect: mockOnDateSelect }));
        expect(react_1.screen.getByText('January')).toBeInTheDocument();
        expect(react_1.screen.getByText('2024')).toBeInTheDocument();
    });
    it('renders weekday headers', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(Calendar_1.default, {}));
        const weekdays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
        weekdays.forEach(day => {
            expect(react_1.screen.getByText(day)).toBeInTheDocument();
        });
    });
    it('handles month navigation', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(Calendar_1.default, { onDateSelect: mockOnDateSelect }));
        // Navigate to next month
        react_1.fireEvent.click(react_1.screen.getByLabelText('next-month'));
        expect(react_1.screen.getByText('February')).toBeInTheDocument();
        // Navigate to previous month
        react_1.fireEvent.click(react_1.screen.getByLabelText('previous-month'));
        expect(react_1.screen.getByText('January')).toBeInTheDocument();
    });
    it('handles year navigation', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(Calendar_1.default, { onDateSelect: mockOnDateSelect }));
        // Change year using select
        react_1.fireEvent.change(react_1.screen.getByLabelText('select-year'), { target: { value: '2025' } });
        expect(react_1.screen.getByText('2025')).toBeInTheDocument();
    });
    it('handles month selection', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(Calendar_1.default, { onDateSelect: mockOnDateSelect }));
        // Change month using select
        react_1.fireEvent.change(react_1.screen.getByLabelText('select-month'), { target: { value: '6' } });
        expect(react_1.screen.getByText('July')).toBeInTheDocument();
    });
    it('calls onDateSelect when clicking a date', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(Calendar_1.default, { onDateSelect: mockOnDateSelect, selectedDate: new Date(2024, 0, 1) }));
        // Click on a date in the current month
        react_1.fireEvent.click(react_1.screen.getByText('15'));
        expect(mockOnDateSelect).toHaveBeenCalledWith(new Date(2024, 0, 15));
    });
    it('respects minDate and maxDate constraints', () => {
        const minDate = new Date(2024, 0, 5);
        const maxDate = new Date(2024, 0, 25);
        (0, react_1.render)((0, jsx_runtime_1.jsx)(Calendar_1.default, { onDateSelect: mockOnDateSelect, selectedDate: new Date(2024, 0, 15), minDate: minDate, maxDate: maxDate }));
        // Find all date buttons
        const dateButtons = react_1.screen.getAllByRole('button').filter(button => {
            const text = button.textContent;
            return (text &&
                !isNaN(parseInt(text)) &&
                button.getAttribute('aria-label') !== 'next-month' &&
                button.getAttribute('aria-label') !== 'previous-month');
        });
        // Find the first date button for January 3rd (should be disabled)
        const earlyDate = dateButtons.find(button => button.textContent === '3' && !button.classList.contains('text-gray-600'));
        expect(earlyDate).toBeDefined();
        expect(earlyDate).toBeDisabled();
        // Find the date button for January 27th (should be disabled)
        const lateDate = dateButtons.find(button => button.textContent === '27');
        expect(lateDate).toBeDefined();
        expect(lateDate).toBeDisabled();
        // Find the date button for January 15th (should be enabled)
        const validDate = dateButtons.find(button => button.textContent === '15');
        expect(validDate).toBeDefined();
        expect(validDate).not.toBeDisabled();
    });
    it('handles year wrap around when navigating months', () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(Calendar_1.default, { onDateSelect: mockOnDateSelect, selectedDate: new Date(2024, 11, 1) }));
        // Navigate to next month (should wrap to January next year)
        react_1.fireEvent.click(react_1.screen.getByLabelText('next-month'));
        expect(react_1.screen.getByText('January')).toBeInTheDocument();
        expect(react_1.screen.getByText('2025')).toBeInTheDocument();
        // Navigate back
        react_1.fireEvent.click(react_1.screen.getByLabelText('previous-month'));
        expect(react_1.screen.getByText('December')).toBeInTheDocument();
        expect(react_1.screen.getByText('2024')).toBeInTheDocument();
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2VyaWNoYW1pbHQwbi9yZXBvcy9sb2RnZTJhL2wyYS1tb2JpbGUtYXBwL3NyYy9jb21wb25lbnRzL0NhbGVuZGFyLnRlc3QudHN4IiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLGtEQUFrRTtBQUNsRSwwREFBaUM7QUFFakMsUUFBUSxDQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUU7SUFDeEIsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUE7SUFFbEMsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQTtRQUNwQixpREFBaUQ7UUFDakQsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFBO1FBQ3BCLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFBLENBQUMsa0JBQWtCO0lBQzdELENBQUMsQ0FBQyxDQUFBO0lBRUYsU0FBUyxDQUFDLEdBQUcsRUFBRTtRQUNiLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQTtJQUN0QixDQUFDLENBQUMsQ0FBQTtJQUVGLEVBQUUsQ0FBQyw4Q0FBOEMsRUFBRSxHQUFHLEVBQUU7UUFDdEQsSUFBQSxjQUFNLEVBQUMsdUJBQUMsa0JBQVEsSUFBQyxZQUFZLEVBQUUsZ0JBQWdCLEdBQUksQ0FBQyxDQUFBO1FBRXBELE1BQU0sQ0FBQyxjQUFNLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQTtRQUN2RCxNQUFNLENBQUMsY0FBTSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUE7SUFDdEQsQ0FBQyxDQUFDLENBQUE7SUFFRixFQUFFLENBQUMseUJBQXlCLEVBQUUsR0FBRyxFQUFFO1FBQ2pDLElBQUEsY0FBTSxFQUFDLHVCQUFDLGtCQUFRLEtBQUcsQ0FBQyxDQUFBO1FBRXBCLE1BQU0sUUFBUSxHQUFHLENBQUMsS0FBSyxF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QUE7UUFDeEQsTUFBTSxDQUFDLGNBQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFBO0lBQ3RELENBQUMsQ0FBQyxDQUFBO0FBQ0osQ0FBQyxDQUFDLENBQUEiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2VyaWNoYW1pbHQwbi9yZXBvcy9sb2RnZTJhL2wyYS1tb2JpbGUtYXBwL3NyYy9jb21wb25lbnRzL0NhbGVuZGFyLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlbmRlciwgc2NyZWVuLCBmaXJlRXZlbnQgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0J1xuaW1wb3J0IENhbGVuZGFyIGZyb20gJy4vQ2FsZW5kYXInXG5cbmRlc2NyaWJlKCdDYWxlbmRhcicsICgpID0+IHtcbiAgY29uc3QgbW9ja09uRGF0ZVNlbGVjdCA9IGplc3QuZm4oKVxuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpXG4gICAgLy8gTW9jayBjdXJyZW50IGRhdGUgdG8gZW5zdXJlIGNvbnNpc3RlbnQgdGVzdGluZ1xuICAgIGplc3QudXNlRmFrZVRpbWVycygpXG4gICAgamVzdC5zZXRTeXN0ZW1UaW1lKG5ldyBEYXRlKDIwMjQsIDAsIDEpKSAvLyBKYW51YXJ5IDEsIDIwMjRcbiAgfSlcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QudXNlUmVhbFRpbWVycygpXG4gIH0pXG5cbiAgaXQoJ3JlbmRlcnMgY2FsZW5kYXIgd2l0aCBjb3JyZWN0IG1vbnRoIGFuZCB5ZWFyJywgKCkgPT4ge1xuICAgIHJlbmRlcig8Q2FsZW5kYXIgb25EYXRlU2VsZWN0PXttb2NrT25EYXRlU2VsZWN0fSAvPilcblxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdKYW51YXJ5JykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnMjAyNCcpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gIH0pXG5cbiAgaXQoJ3JlbmRlcnMgd2Vla2RheSBoZWFkZXJzJywgKCkgPT4ge1xuICAgIHJlbmRlcig8Q2FsZW5kYXIgLz4pXG5cbiAgICBjb25zdCB3ZWVrZGF5cyA9IFsnU3VuJywgJ01vbicsICdUdWUnLCAnV2VkJywgJ1RodScsICdGcmknLCAnU2F0J11cbiAgICB3ZWVrZGF5cy5mb3JFYWNoKGRheSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dChkYXkpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgfSlcbiAgfSlcblxuICBpdCgnaGFuZGxlcyBtb250aCBuYXZpZ2F0aW9uJywgKCkgPT4ge1xuICAgIHJlbmRlcig8Q2FsZW5kYXIgb25EYXRlU2VsZWN0PXttb2NrT25EYXRlU2VsZWN0fSAvPilcblxuICAgIC8vIE5hdmlnYXRlIHRvIG5leHQgbW9udGhcbiAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCduZXh0LW1vbnRoJykpXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0ZlYnJ1YXJ5JykpLnRvQmVJblRoZURvY3VtZW50KClcblxuICAgIC8vIE5hdmlnYXRlIHRvIHByZXZpb3VzIG1vbnRoXG4gICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgncHJldmlvdXMtbW9udGgnKSlcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnSmFudWFyeScpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gIH0pXG5cbiAgaXQoJ2hhbmRsZXMgeWVhciBuYXZpZ2F0aW9uJywgKCkgPT4ge1xuICAgIHJlbmRlcig8Q2FsZW5kYXIgb25EYXRlU2VsZWN0PXttb2NrT25EYXRlU2VsZWN0fSAvPilcblxuICAgIC8vIENoYW5nZSB5ZWFyIHVzaW5nIHNlbGVjdFxuICAgIGZpcmVFdmVudC5jaGFuZ2Uoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdzZWxlY3QteWVhcicpLCB7IHRhcmdldDogeyB2YWx1ZTogJzIwMjUnIH0gfSlcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnMjAyNScpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gIH0pXG5cbiAgaXQoJ2hhbmRsZXMgbW9udGggc2VsZWN0aW9uJywgKCkgPT4ge1xuICAgIHJlbmRlcig8Q2FsZW5kYXIgb25EYXRlU2VsZWN0PXttb2NrT25EYXRlU2VsZWN0fSAvPilcblxuICAgIC8vIENoYW5nZSBtb250aCB1c2luZyBzZWxlY3RcbiAgICBmaXJlRXZlbnQuY2hhbmdlKHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnc2VsZWN0LW1vbnRoJyksIHsgdGFyZ2V0OiB7IHZhbHVlOiAnNicgfSB9KVxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdKdWx5JykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgfSlcblxuICBpdCgnY2FsbHMgb25EYXRlU2VsZWN0IHdoZW4gY2xpY2tpbmcgYSBkYXRlJywgKCkgPT4ge1xuICAgIHJlbmRlcig8Q2FsZW5kYXIgb25EYXRlU2VsZWN0PXttb2NrT25EYXRlU2VsZWN0fSBzZWxlY3RlZERhdGU9e25ldyBEYXRlKDIwMjQsIDAsIDEpfSAvPilcblxuICAgIC8vIENsaWNrIG9uIGEgZGF0ZSBpbiB0aGUgY3VycmVudCBtb250aFxuICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCcxNScpKVxuICAgIGV4cGVjdChtb2NrT25EYXRlU2VsZWN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChuZXcgRGF0ZSgyMDI0LCAwLCAxNSkpXG4gIH0pXG5cbiAgaXQoJ3Jlc3BlY3RzIG1pbkRhdGUgYW5kIG1heERhdGUgY29uc3RyYWludHMnLCAoKSA9PiB7XG4gICAgY29uc3QgbWluRGF0ZSA9IG5ldyBEYXRlKDIwMjQsIDAsIDUpXG4gICAgY29uc3QgbWF4RGF0ZSA9IG5ldyBEYXRlKDIwMjQsIDAsIDI1KVxuXG4gICAgcmVuZGVyKFxuICAgICAgPENhbGVuZGFyXG4gICAgICAgIG9uRGF0ZVNlbGVjdD17bW9ja09uRGF0ZVNlbGVjdH1cbiAgICAgICAgc2VsZWN0ZWREYXRlPXtuZXcgRGF0ZSgyMDI0LCAwLCAxNSl9XG4gICAgICAgIG1pbkRhdGU9e21pbkRhdGV9XG4gICAgICAgIG1heERhdGU9e21heERhdGV9XG4gICAgICAvPlxuICAgIClcblxuICAgIC8vIEZpbmQgYWxsIGRhdGUgYnV0dG9uc1xuICAgIGNvbnN0IGRhdGVCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5Um9sZSgnYnV0dG9uJykuZmlsdGVyKGJ1dHRvbiA9PiB7XG4gICAgICBjb25zdCB0ZXh0ID0gYnV0dG9uLnRleHRDb250ZW50XG4gICAgICByZXR1cm4gKFxuICAgICAgICB0ZXh0ICYmXG4gICAgICAgICFpc05hTihwYXJzZUludCh0ZXh0KSkgJiZcbiAgICAgICAgYnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcpICE9PSAnbmV4dC1tb250aCcgJiZcbiAgICAgICAgYnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcpICE9PSAncHJldmlvdXMtbW9udGgnXG4gICAgICApXG4gICAgfSlcblxuICAgIC8vIEZpbmQgdGhlIGZpcnN0IGRhdGUgYnV0dG9uIGZvciBKYW51YXJ5IDNyZCAoc2hvdWxkIGJlIGRpc2FibGVkKVxuICAgIGNvbnN0IGVhcmx5RGF0ZSA9IGRhdGVCdXR0b25zLmZpbmQoXG4gICAgICBidXR0b24gPT4gYnV0dG9uLnRleHRDb250ZW50ID09PSAnMycgJiYgIWJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ3RleHQtZ3JheS02MDAnKVxuICAgIClcbiAgICBleHBlY3QoZWFybHlEYXRlKS50b0JlRGVmaW5lZCgpXG4gICAgZXhwZWN0KGVhcmx5RGF0ZSkudG9CZURpc2FibGVkKClcblxuICAgIC8vIEZpbmQgdGhlIGRhdGUgYnV0dG9uIGZvciBKYW51YXJ5IDI3dGggKHNob3VsZCBiZSBkaXNhYmxlZClcbiAgICBjb25zdCBsYXRlRGF0ZSA9IGRhdGVCdXR0b25zLmZpbmQoYnV0dG9uID0+IGJ1dHRvbi50ZXh0Q29udGVudCA9PT0gJzI3JylcbiAgICBleHBlY3QobGF0ZURhdGUpLnRvQmVEZWZpbmVkKClcbiAgICBleHBlY3QobGF0ZURhdGUpLnRvQmVEaXNhYmxlZCgpXG5cbiAgICAvLyBGaW5kIHRoZSBkYXRlIGJ1dHRvbiBmb3IgSmFudWFyeSAxNXRoIChzaG91bGQgYmUgZW5hYmxlZClcbiAgICBjb25zdCB2YWxpZERhdGUgPSBkYXRlQnV0dG9ucy5maW5kKGJ1dHRvbiA9PiBidXR0b24udGV4dENvbnRlbnQgPT09ICcxNScpXG4gICAgZXhwZWN0KHZhbGlkRGF0ZSkudG9CZURlZmluZWQoKVxuICAgIGV4cGVjdCh2YWxpZERhdGUpLm5vdC50b0JlRGlzYWJsZWQoKVxuICB9KVxuXG4gIGl0KCdoYW5kbGVzIHllYXIgd3JhcCBhcm91bmQgd2hlbiBuYXZpZ2F0aW5nIG1vbnRocycsICgpID0+IHtcbiAgICByZW5kZXIoPENhbGVuZGFyIG9uRGF0ZVNlbGVjdD17bW9ja09uRGF0ZVNlbGVjdH0gc2VsZWN0ZWREYXRlPXtuZXcgRGF0ZSgyMDI0LCAxMSwgMSl9IC8+KVxuXG4gICAgLy8gTmF2aWdhdGUgdG8gbmV4dCBtb250aCAoc2hvdWxkIHdyYXAgdG8gSmFudWFyeSBuZXh0IHllYXIpXG4gICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnbmV4dC1tb250aCcpKVxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdKYW51YXJ5JykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnMjAyNScpKS50b0JlSW5UaGVEb2N1bWVudCgpXG5cbiAgICAvLyBOYXZpZ2F0ZSBiYWNrXG4gICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgncHJldmlvdXMtbW9udGgnKSlcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnRGVjZW1iZXInKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcyMDI0JykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgfSlcbn0pXG4iXSwidmVyc2lvbiI6M30=